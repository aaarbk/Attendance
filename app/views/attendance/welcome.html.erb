
<%= form_tag("/process", method: "post", id: "form") do %>
  <div class="form-group">
<%= label_tag(:card_num, "Card Number") %>
<%= text_field_tag(:card_num, nil, class: "form-control") %>
</div>
<% end %>

<% if flash[:notice] %>
<div class="flash notice"><%= flash[:notice] %></div>
<% end %>


<script>

window.onload = function() {
  document.getElementById("card_num").focus();
};

const form = document.getElementById("form")
const textfield = document.getElementById("card_num")

form.addEventListener("input", 
function() {
  setTimeout(() => {
       form.submit();
    }, 500);
});



setTimeout(function() {
  $('.notice').fadeOut('slow', function() { 
    $('.notice').addClass('hide-notice');
})
}, 3000);
</script>